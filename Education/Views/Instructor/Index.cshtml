@using Education.Models
@model IEnumerable<Instructor>
@{
    ViewData["Title"] = "Index";
}


<a asp-action="New" class="btn btn-primary d-flex align-self-end mb-4">Add</a>
<table class="table tab">
    <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Address</th>
        <th>Age</th>
        <th>Image</th>
        <th>Action</th>
       
    </tr>
    @foreach (var item in Model ?? Enumerable.Empty<Instructor>())
    {
        <tr>
            <td>@item.Name</td>
            <td>@item.Email</td>
            <td>@item.Phone</td>
            <td>@item.Address</td>
            <td>@item.Age</td>
            <td style="width:15%">
                @if (item.image?.Length > 0)
                {
                    <img class="w-50" src="data:image/jpg;base64,@Convert.ToBase64String(item.image)" />
                }
                else
                {
                    <p>Not Found</p>
                }
            </td>
           @* <td><a href="/Instructor/Edit/@item.Id" class="btn btn-primary">Edit</a></td>
            <td><a href="/Instructor/Delete/@item.Id" class="btn btn-danger">Delete</a></td>*@
            <td>
                <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-success">Edit</a>
                <a class="btn btn-danger delete-button" data-id="@item.Id">Delete</a>
            </td>
           
        </tr>
    }
</table>
@section Scripts
    {
    <partial name="_ValidationScriptsPartial" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/alertify.min.js" integrity="sha512-JnjG+Wt53GspUQXQhc+c4j8SBERsgJAoHeehagKHlxQN+MtCCmFDghX9/AcbkkNRZptyZU4zC8utK59M5L45Iw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/alertify.min.css" integrity="sha512-IXuoq1aFd2wXs4NqGskwX2Vb+I8UJ+tGJEu/Dc0zwLNKeQ7CW3Sr6v0yU3z5OQWe3eScVIkER4J9L7byrgR/fA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script>
        $(document).ready(function () {
            $(".delete-button").click(function () {
                var InstructorId = $(this).data("id");
                var deleteUrl = '@Url.Action("Delete", "Instructor", new { id = "__id__" })'.replace('__id__', InstructorId);

                alertify.confirm("Confirm Deletion", "Are you sure you want to delete this Instrucor ?",
                    function () {
                        window.location.href = deleteUrl;
                        alertify.success('Ok');
                    },
                    function () {
                        alertify.error('Cancel');
                    });
            });
        });
    </script>

}